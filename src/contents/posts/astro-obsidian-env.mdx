---
title: ObsidianでAstro製ブログを執筆する
desc: Obsidianを使って記事を執筆し、Astroブログをビルドしました。
pubDate: 2025-05-11
tags:
  - Obsidian
  - Astro
  - Git
  - subtree
pub: false
---

import Details from "@layouts/Details.astro";
// 必ずclientディレクティブを設定する
import Quiz from "@components/Quiz";

以前から運用している[Astro](https://astro.build/)製のブログを改造し、[Obsidian](https://obsidian.md/)から執筆できるようにした。その内容を記事として記録することとした。同じような構成を検討している方の参考になれば幸いである。

## 概要

以前は記事などをAstroプロジェクトの`src/content`に保存していた。
content以下を別の場所に移し、記事用プロジェクトとして新しく `git init`、GitHubにプッシュする。Astroブログのプロジェクトにて、 `git subtree`を使って、プッシュした記事用のリポジトリを紐付ける。

Obsidianで記事用プロジェクトを開き、[Git プラグイン](https://github.com/Vinzent03/obsidian-git)をインストールし、記事を書く。

記事ができたら、Astroプロジェクト側で変更を `git subtree pull`・コミットして、デプロイする。

## Astro

Astroは静的サイトを作ることができるフレームワークで、デフォルトでJavaScriptが含まれない。Astroで定義したコンポーネントやReactなど他のフレームワークのコンポーネントを使うことができる。ブログなど、「コンテンツ駆動のウェブサイト」を生成するのに向いている。　

ウェブサイトに含まれるコンテンツはマークダウン、MDX、JSONなどで定義できる。
本稿では、記事を `src/content/posts`に格納するものとする。

参考

https://docs.astro.build/ja/concepts/why-astro/

## Obsidian

Obsidianはマークダウンエディタである。ローカルに保存されたマークダウン形式のテキストファイルを編集する。

[obsidian-git](https://github.com/Vinzent03/obsidian-git)プラグインを導入すれば、Gitリポジトリを作成し、自動でコミットとリモートリポジトリのプッシュ・プルを行える。

本記事では、ブログ記事の執筆をObsidianで行い、それをGitHubのプライベートリポジトリにプッシュする。
## 実装

まず、記事本体と写真などの添付ファイルを`src/content`にまとめ、記事内のリンクを変更した。このディレクトリ以下をObsidian で管理するためだ。

`git subtree`を使って、Astroプロジェクトにリンクする。

Obsidianでは一定時間ごとの自動コミットを行うため、記事用のリポジトリには書きかけの記事が置かれることとなる。書きかけは公開したくないから、記事用リポジトリは非公開とする。

submoduleを使うこともできるが、これは記事の変更がAstroプロジェクトに反映されないため、subtreeを用いた。
